#{extends 'main.html' /}
#{set 'title'}
    ${restaurant.title} menu list
#{/set}
#{set 'breadCrumb' }
<a class="enter back" href="/" >&{'common.back'}</a>
#{if ((user != null )&&!(user instanceof models.users.AnonymousEndUser))}
<a class="enter" href="@{Secure.logout()}">&{'common.logout'}</a>
<a class="enter" href="@{Locker.index()}">&{'common.loggedinas', controllers.Security.connected()}</a>
#{/if}
#{else}
<a class="enter" href="@{Secure.login()}">&{'common.login'}</a>
<a class="enter" href="@{Application.newUser()}">&{'common.register'}</a>
#{/else}
#{/set}

#{set 'moreScripts'}
<script type="text/javascript" src="@{'/public/javascripts/jquery.fancybox-1.3.4.js'}"></script>
<script type="text/javascript" src="@{'/public/javascripts/jquery.floatobject-1.0.js'}"></script>
<script type="text/javascript" src="@{'/public/javascripts/inputs_and_labels.js'}"></script>
<script type="text/javascript" src="@{'/public/javascripts/jquery.jNice.js'}"></script>
<script type="text/javascript" src="@{'/public/javascripts/jquery.mousewheel-3.0.4.pack.js'}"></script>
<script type="text/javascript" src="@{'/public/javascripts/mtmpl.js'}"></script>
<script type="text/javascript">
var uu = #{jsAction @Application.basket(":chart") /}
var cu = #{jsAction @Application.comps() /}
var au = #{jsAction @Application.addOrderItem() /}
var du = #{jsAction @Application.cngOrderItem() /}
var rid = ${restaurant.id};
</script>
<script type="text/html" id="cmfrtmp">
<div class="ing_popup" id="ing_popup">
	<h1><%=i.nm%></h1>
	<p><%=i.dc%></p>
		<form class="jNice">
			<input type="hidden" id="basePc" value="<%=i.pc%>" />
			<table class="wrapper">
				<tr class="ing_headr"><th colspan="6">&{'common.additionalComponents'}</th></tr>
				<%=i.tb%>			
				<tr class="total"><td><span class="txt">&{'common.basket.all'}</span></td><td colspan="4"></td><td class="price">+<%=i.pcd%> &{'common.uah'}</td>	</tr>
				<tr class="button"><td colspan="6"><div onclick="Basket.add(<%=i.no%>)">&{'common.basket.add'}</div></td>	</tr>
			</table>
		</form>
	</div>
</script>
<script type="text/html" id="rotmp">
<tr><td colspan="3"><table><%=i.l%></table></td><td colspan="3"><table><%=i.r%></table></td></tr>
</script>
<script type="text/html" id="dtmp">
<tr><td><% if(d.id){ %><input type="checkbox" id="ck<%=d.id%>" onClick="toggle(this);" /><% }
 %></td><td><label for="ck<%=d.id%>"><%=d.nm?d.nm:''%></label></td><td class="price"><%=d.pr?'+'+d.pr+' &{'common.uah'}':''%></td></td></tr>
</script>
<script type="text/html" id="ittmp">
<tr><th><span class="delete" onclick="Basket.cng(<%=id%>,-1)"></span></th><td><p><%=nm%></p><p class="descr"><%=de%></p></td><td><%=pc%> &{'common.uah'}</td></tr>
</script>
<script type="text/html" id="dptmp">
<tr class="total total2"><th></th><td><p>&{'common.basket.delivery'}</p></td><td><%=pc%> &{'common.uah'}</td></tr>
</script>
<script type="text/html" id="tptmp">
<tr class="total"><th></th><td><p>Загальна сумма</p></td><td><%=pc%> &{'common.uah'}</td></tr>
</script>
<script type="text/javascript" src="@{'/public/javascripts/menu.js'}"></script>
#{/set}
				<div class="left_cont restMenu">
					<div class="rest_menu">
						<h1>
							${restaurant.title},
							<span>${restaurant.addressToString()}</span>
							<a>${restaurant.isOnlineAsString()}</a>
						</h1>
						<table>
						%{
							int size = menuItems.size();
							for (int base = 0; base < size; base+=4) { 
						}%
							<tr>
							%{
								for (int i = base; (i< base+4)&&( size > i); i++ ){
									models.MenuItemGroup grp = menuItems.get(i);
							}% 

									<td><a href="#${grp.anchorName()}">${grp.name}</a></td>
							%{
								}
							}%
							</tr>
						%{
							}
						}%
						</table>
					</div>
					
					#{list items:menuItems, as:'grp'}
					<div class="det_rest_menu">	
						<a class="anchor_link" name="${grp.anchorName()}"></a>
						<h1>${grp.name}</h1>
						<table> <!-- class="od" -->
							%{
								for (int i = 0; i < grp.items.size(); i++){
								models.MenuItem itm = grp.items.get(i);
								boolean odd = i%2!=0;
							}%
							<tr onclick="add(${itm.id},${itm.showComponents})" class="${odd == true ? "od" : "even"}">
								<th><a id="a${itm.id}" class="ingredient_popup_but"  title="&{'common.basket.buttonTitle'}"></a></th>
								<td>
									<p>${itm.name}</p>
									<p class="descr">${itm.description}</p>
								</td>
								<td>${itm.price().raw()} &{'common.uah'}</td>
							</tr>
							%{}}%
						</table>
					</div>
					#{/list}
				</div>
				<div class="right_cont">
					<div class="right_block" id="basket">
						<div><h1>&{'common.basket'}</h1></div>
						<div class="rb_cont">
							<form action="@{Application.checkout}">
								<table>
									<tr class="total total2">
										<tr align="center"><td colspan="2" align="center"><img src="@{'/public/images/ajax-loader-2.gif'}" /></td></tr>
										<th></th>
										<td>
											<p>&{'common.basket.delivery'}</p>
										</td>
										<td>-- &{'common.uah'}</td>
									</tr>
									<tr class="total">
										<th></th>
										<td>
											<p>Загальна сумма</p>
										</td>
										<td> -- &{'common.uah'}</td>
									</tr>
								</table>
								<input type="submit" value="&{'common.basket.go'}" />
							</form>
						</div>
					</div>
				</div>
