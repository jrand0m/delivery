<!--#{extends 'main.html' /}

#{set 'title'}
    Order #${order.getShortHandId()}
#{/set}

<div>Total price will be: <span>${order.getMenuTotal()}</span></div>
<div>-</div>
<div>Your Discount: <span>${order.getUserDiscount()}</span></div>
<div>+</div>
<div>Delivery price : <span>${order.getDeliveryPrice()}</span></div>
<br>
<div>Grand total: ${order.getGrandTotal()}</div>

<div><a href="@">Send now!</a></div>-->


#{set 'moreScripts'}
<script type="text/javascript" src="@{'/public/javascripts/jquery.jNice.js'}"></script>
#{/set}
#{set 'breadCrumb' }
<a class="enter back" href="#" onClick="history.go(-1);return true;">&{'common.back'}</a>
		*{check for anon, if anon make register}*
		<a class="enter" href="@{Secure.logout()}">&{'common.logout'}</a>
		<a class="enter" href="@{Locker.index()}">&{'common.loggedinas', controllers.Security.connected()}</a>
#{/set}
<div class="left_cont">
	<div class="checkout">
		<h1>&{'common.order.blockTitle'}</h1>
		<form class="jNice" action="@{Application.checkAndSend(order.id)}">
			<table class="data_form">
				<tr><th><label for="cinp01">&{'common.reg.name'}</label></th><td><input type="text" value="" name="name" id="cinp01" /></td><th><label for="cinp02">&{'common.reg.city'}</label></th><td><input type="text" name="city" value="Львів"  id="cinp02" readonly /></td></tr>
				<tr><th><label for="cinp03">&{'common.reg.surname'}</label></th><td><input name="surname" type="text" value="" id="cinp03" /></td><th><label for="cinp04">&{'common.reg.street'}</label></th><td><input name="street" type="text" value="" id="cinp04" /></td></tr>
				<tr><th><label for="cinp05">&{'common.reg.email'}</label></th><td><input class="wrong_data" name="phone" type="text" value="" id="cinp05" /><span class="wrong_data">&{'common.reg.danger'}</span></td><th><label for="cinp06">&{'common.reg.homenumber'}</label></th><td><input name="apartment" type="text" value="" id="cinp06" /></td></tr>
				<tr><th><label for="cinp07">&{'common.reg.phone'}</label></th><td><input name="phone" type="text" value="" id="cinp07" /></td><th><label>&{'common.reg.paymentType'}</label></th><td><span><input type="radio" name="oplata" checked />&{'common.reg.paymentType.cash'}</span></td></tr>
				<tr><th></th><td></td>
				<th class="frst" colspan='2'><span><input type="radio" name="oplata" disabled="true" />&{'common.reg.paymentType.card'}<img class="card_pic" src="/public/images/visamastercard.png" /></span></th></tr>
			</table>
			<table class="total">
				<tr><th><span>&{'common.basket.order'}</span></th><td><span>${order.getMenuTotalString()} &{'common.uah'}</span></td></tr>
				<tr class="pretotal"><th><span>&{'common.basket.delivery'}</span></th><td><span>${order.getDeliveryPriceString()} &{'common.uah'}</span></td></tr>
				<tr class="total"><th><span>&{'common.basket.total'}</span></th><td><span>${order.getGrandTotalString()} &{'common.uah'}</span></td></tr>
				<tr><td colspan="2"><input type="submit" value="&{'common.basket.toorder'}" /></td></tr>
			</table>
			<div class="additional_addreses">
				<h2>Додаткові адреси</h2>
				#{if user instanceof models.users.AnonymousEndUser}
					<p><a href="@{Application.newUser()}">Зареєструйтеся</a> щоби отримати можливість використовувати попередні або збережені адреси</p>
				#{/if}
				#{else}
					#{list items:user.addressBook, as:'address'}
						<p> ${address.street} ${address.building}, ${address.appartamentsNumber} <a href="#">&{'common.basket.addaddress'}</a></p>
					#{/list}
				#{/else}
			</div>
		</form>
	</div>
	<h3 class="wait_time">~<span>5</span> &{'common.order.minutes'} потрібно ресторану, щоб обробити ваше замовлення</h3>
</div>
<div class="right_cont">
	<div class="right_block" id="basket">
		<h1>&{'common.basket'}</h1>
		<div class="rb_cont">
			<form action="#">
				<table>
				#{list items:order.items, as:'oi'}
					<tr>
						<th></th>
						<td>
							<p>${oi.name()}</p>
							<p class="descr">${oi.desc()}</p>
						</td>
						<td>${oi.orderItemPrice} &{'common.uah'}</td>
					</tr>
				#{/list}
				</table>
				
			</form>
		</div>
	</div>
</div>